(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[885],{77885:function(e,t,r){"use strict";r.r(t),r.d(t,{PhantomAdapter:function(){return ze}});var n=r(15861),a=r(15671),i=r(43144),o=r(97326),c=r(73237),s=r(32531),u=r(82963),p=r(61120),l=r(4942),f=r(87757),h=r.n(f),d=r(95844);function v(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}var y=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),m=function(e){function t(t,r){var n=this.constructor,a=e.call(this,t,r)||this;return Object.defineProperty(a,"name",{value:n.name,enumerable:!1,configurable:!0}),function(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}(a,n.prototype),v(a),a}return y(t,e),t}(Error);var g=r(20917),w=r(96245),k=r(2043),b=r.n(k),x="eip155",E="solana",P="other",O="solana",C=function(e,t){if(e===P)return null;var r=t?"number"===typeof t?t:parseInt(t,16):function(e){if(e===x)return 1;if(e===E)return 1;throw new Error("Chain namespace ".concat(e," is not supported"))}(e);return e===x?function(e){return 1===e?{chainNamespace:x,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:x,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:x,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:x,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:x,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:x,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:x,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:x,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:x,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:x,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:x,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null}(r):e===E?function(e){return 1===e?{chainNamespace:E,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:E,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:E,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null}(r):null};function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var N=function(e){(0,s.Z)(r,e);var t=Z(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,n),(0,l.Z)((0,o.Z)(i),"code",void 0),(0,l.Z)((0,o.Z)(i),"message",void 0),i.code=e,i.message=n||"",Object.defineProperty((0,o.Z)(i),"name",{value:"Web3AuthError"}),i}return(0,i.Z)(r,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),r}(m),A=function(e){(0,s.Z)(r,e);var t=Z(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,e,n),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletInitializationError"}),i}return(0,i.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5013,e)}}]),r}(N);(0,l.Z)(A,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var T=function(e){(0,s.Z)(r,e);var t=Z(r);function r(e,n){var i;return(0,a.Z)(this,r),i=t.call(this,e,n),Object.defineProperty((0,o.Z)(i),"name",{value:"WalletLoginError"}),i}return(0,i.Z)(r,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new r(e,"".concat(r.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return r.fromCode(5114,e)}}]),r}(N);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(0,l.Z)(T,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var R={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},S=I({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},R),j=I({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},R),D=I(I({},j),S);function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q="external",U={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},L=B(B({},U),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),W=function(e){(0,s.Z)(r,e);var t=M(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),(0,l.Z)((0,o.Z)(e),"adapterData",{}),(0,l.Z)((0,o.Z)(e),"sessionTime",86400),(0,l.Z)((0,o.Z)(e),"chainConfig",null),e}return(0,i.Z)(r,[{key:"chainConfigProxy",get:function(){return this.chainConfig?B({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==U.READY){if(!e.chainNamespace)throw A.notReady("ChainNamespace is required while setting chainConfig");var t=C(e.chainNamespace,e.chainId);this.chainConfig=B(B({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==D.WALLET_CONNECT_V1||this.status!==U.CONNECTING){if(this.status===U.CONNECTING)throw A.notReady("Already connecting");if(this.status===U.CONNECTED)throw T.connectionError("Already connected");if(this.status!==U.READY)throw T.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw T.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==U.NOT_READY){if(this.status===U.CONNECTED)throw A.notReady("Already connected");if(this.status===U.READY)throw A.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit(L.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),r}(d.Ue),Y="https://authjs.web3auth.io",z=b().getLogger("web3auth-logger");function H(e){var t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(o){var i=o;return!(!i||22!==i.code&&1014!==i.code&&"QuotaExceededError"!==i.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==i.name||!r||0===n)}}var F=function(e){var t=(0,w.Z)(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)},G=function(){var e=(0,n.Z)(h().mark((function e(t,r){var n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={payload:t,header:{t:"solana"===r?"sip99":"eip191"},network:"solana"===r?"solana":"ethereum"},e.next=6,(0,g.v_)("".concat(Y,"/siww/get"),n);case 6:if((a=e.sent).success){e.next=9;break}throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return e.abrupt("return",a.challenge);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),V=function(){var e=(0,n.Z)(h().mark((function e(t,r,n,a,i,o){var c,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={signature:{s:r,t:"solana"===t?"sip99":"eip191"},message:n,issuer:a,audience:window.location.hostname,timeout:i},e.next=4,(0,g.v_)("".concat(Y,"/siww/verify"),c,{headers:{client_id:o,wallet_provider:a}});case 4:if((s=e.sent).success){e.next=8;break}throw z.error("Failed to authenticate user, ,message verification failed",s.error),new Error("Failed to authenticate user, ,message verification failed");case 8:return e.abrupt("return",s.token);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n,a,i,o){return e.apply(this,arguments)}}(),X=function(e,t,r){return H("localStorage")?localStorage.setItem("".concat(e.toLowerCase(),"_").concat(t),r):null},J=r(9193),Q=r.n(J);function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var ee=function(e){(0,s.Z)(r,e);var t=$(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)(this,r),e=t.call(this),(0,l.Z)((0,o.Z)(e),"clientId",void 0),e.clientId=n.clientId,e}return(0,i.Z)(r,[{key:"authenticateUser",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r,n,a,i,o,c,s,u,p,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider&&null!==(t=this.chainConfig)&&void 0!==t&&t.chainId){e.next=2;break}throw T.notConnectedError();case 2:if(r=this.chainConfig,n=r.chainNamespace,a=r.chainId,this.status===U.CONNECTED){e.next=5;break}throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"getAccounts"});case 7:if(!((i=e.sent)&&i.length>0)){e.next=27;break}if(f=i[0],h=this.name,!(o=H("localStorage")?localStorage.getItem("".concat(f.toLowerCase(),"_").concat(h)):null)){e.next=14;break}if(F(o)){e.next=14;break}return e.abrupt("return",{idToken:o});case 14:return c={domain:window.location.origin,uri:window.location.href,address:i[0],chainId:parseInt(a,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},e.next=17,G(c,n);case 17:return s=e.sent,u=(new TextEncoder).encode(s),e.next=21,this.provider.request({method:"signMessage",params:{message:u,display:"utf8"}});case 21:return p=e.sent,e.next=24,V(n,Q().encode(p),s,this.name,this.sessionTime,this.clientId);case 24:return l=e.sent,X(i[0],this.name,l),e.abrupt("return",{idToken:l});case 27:throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 28:case"end":return e.stop()}var f,h}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,n.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===U.CONNECTED){e.next=2;break}throw T.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"getAccounts"});case 4:(t=e.sent)&&t.length>0&&(r=t[0],n=this.name,H("localStorage")&&localStorage.removeItem("".concat(r.toLowerCase(),"_").concat(n)));case 6:case"end":return e.stop()}var r,n}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(W),te=r(59506),re=r(79826),ne=r(23420),ae=r.n(ne);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var se=function(e){(0,s.Z)(r,e);var t=ce(r);function r(e){var n,i,s=e.config,u=e.state;if((0,a.Z)(this,r),i=t.call(this,{config:s,state:u}),(0,l.Z)((0,o.Z)(i),"_providerEngineProxy",null),!s.chainConfig)throw A.invalidProviderConfigError("Please provide chainConfig");if(!s.chainConfig.chainId)throw A.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!s.chainConfig.rpcTarget)throw A.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return i.defaultState={chainId:"loading"},i.defaultConfig={chainConfig:s.chainConfig,networks:(0,l.Z)({},s.chainConfig.chainId,s.chainConfig)},(0,c.Z)((n=(0,o.Z)(i),(0,p.Z)(r.prototype)),"initialize",n).call(n),i}return(0,i.Z)(r,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){if(!e.chainId)throw re.ethErrors.rpc.invalidParams("chainId is required");if(!e.rpcTarget)throw re.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:oe(oe({},this.config.networks),{},(0,l.Z)({},e.chainId,e))})}},{key:"getChainConfig",value:function(e){var t,r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw re.ethErrors.rpc.invalidRequest("Chain ".concat(e," is not supported, please add chainConfig for it"));return r}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,te.qY)(e)}}]),r}(te.xG),ue=function(){function e(){(0,a.Z)(this,e),(0,l.Z)(this,"_providerEngineProxy",null)}return(0,i.Z)(e,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(e){throw new Error("Method not implemented.")}},{key:"addChain",value:function(e){throw new Error("Method not implemented.")}},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getPrivKeyMiddleware(t),(n=new d.eI).push(r),a=(0,te.Xj)(n),this.updateProviderEngineProxy(a);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,te.qY)(e)}},{key:"getPrivKeyMiddleware",value:function(e){var t={getPrivatekey:function(){var t=(0,n.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()};return this.createPrivKeyMiddleware(t)}},{key:"createPrivKeyMiddleware",value:function(e){var t=e.getPrivatekey;function r(){return(r=(0,n.Z)(h().mark((function e(r,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n.result=e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,d.v0)({private_key:(0,d.Pk)((function(e,t){return r.apply(this,arguments)}))})}}]),e}();(0,l.Z)(ue,"getProviderInstance",function(){var e=(0,n.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new ue,e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());ae()();var pe=r(77191),le=r.n(pe),fe=r(59917),he=r(50108),de=r.n(he),ve=r(48764).Buffer;function ye(e){return function(t,r,n,a){return"solana_chainId"===t.method?(r.result=e,a()):n()}}function me(e){return function(t,r,n,a){return"solana_provider_config"===t.method?(r.result=e,a()):n()}}function ge(e){var t=e.chainId;return(0,d.UZ)([ye(t),me(e)])}function we(e){var t=e.rpcTarget,r=(0,te.v$)({rpcTarget:t});return{networkMiddleware:(0,d.UZ)([ge(e),r]),fetchMiddleware:r}}function ke(e){var t=e.getAccounts;return(0,d.Pk)(function(){var e=(0,n.Z)(h().mark((function e(r,n,a){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("getAccounts"===r.method){e.next=3;break}return e.abrupt("return",a());case 3:if(t){e.next=5;break}throw new Error("WalletMiddleware - opts.getAccounts not provided");case 5:return e.next=7,t(r);case 7:return i=e.sent,n.result=i,e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())}function be(e){var t=e.requestAccounts;return(0,d.Pk)(function(){var e=(0,n.Z)(h().mark((function e(r,n,a){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("requestAccounts"===r.method){e.next=3;break}return e.abrupt("return",a());case 3:if(t){e.next=5;break}throw new Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return e.next=7,t(r);case 7:return i=e.sent,n.result=i,e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())}function xe(e,t){return(0,d.Pk)(function(){var r=(0,n.Z)(h().mark((function r(n,a,i){var o;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.method===e){r.next=3;break}return r.abrupt("return",i());case 3:if(t){r.next=5;break}throw new Error("WalletMiddleware - ".concat(e," not provided"));case 5:return r.next=7,t(n);case 7:return o=r.sent,a.result=o,r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}())}function Ee(e){var t=e.getAccounts,r=e.requestAccounts,n=e.signTransaction,a=e.signAndSendTransaction,i=e.signAllTransactions,o=e.signMessage,c=e.getPrivateKey,s=e.getSecretKey;return(0,d.UZ)([be({requestAccounts:r}),ke({getAccounts:t}),xe("signTransaction",n),xe("signAndSendTransaction",a),xe("signAllTransactions",i),xe("signMessage",o),xe("solanaPrivateKey",c),xe("solanaSecretKey",s)])}function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var Ze=function(e){(0,s.Z)(r,e);var t=Ce(r);function r(e){var n=e.config,i=e.state;return(0,a.Z)(this,r),t.call(this,{config:{chainConfig:Oe(Oe({},n.chainConfig),{},{chainNamespace:E})},state:i})}return(0,i.Z)(r,[{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new d.eI,n=this.getProviderHandlers(t),a=Ee(n),r.push(a),i=ge(this.config.chainConfig),r.push(i),(o=this.getInjectedProviderProxy(t))&&r.push(o),c=(0,te.Xj)(r),this.updateProviderEngineProxy(c),e.next=12,this.lookupNetwork();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.config.chainConfig,this.update({chainId:t.chainId}),e.abrupt("return",t.chainId||"");case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getInjectedProviderProxy",value:function(e){}}]),r}(se),Ne=function(e){var t={requestAccounts:function(){var t=(0,n.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.publicKey?[le().encode(e.publicKey.toBytes())]:[]);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getAccounts:function(){var t=(0,n.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.publicKey?[le().encode(e.publicKey.toBytes())]:[]);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getPrivateKey:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw re.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSecretKey:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw re.ethErrors.rpc.methodNotSupported();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signTransaction:function(){var t=(0,n.Z)(h().mark((function t(r){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signTransaction(r.params.message);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signMessage:function(){var t=(0,n.Z)(h().mark((function t(r){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signMessage(r.params.message,r.params.display);case 2:return n=t.sent,t.abrupt("return",n.signature);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signAllTransactions:function(){var t=(0,n.Z)(h().mark((function t(r){var n,a,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=r.params)&&void 0!==n&&n.message&&null!==(a=r.params)&&void 0!==a&&a.message.length){t.next=2;break}throw re.ethErrors.rpc.invalidParams("message");case 2:return t.next=4,e.signAllTransactions(r.params.message);case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),signAndSendTransaction:function(){var t=(0,n.Z)(h().mark((function t(r){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signAndSendTransaction(r.params.message);case 2:return n=t.sent,t.abrupt("return",{signature:n.signature});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return t};function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e){return(0,d.Pk)(function(){var t=(0,n.Z)(h().mark((function t(r,n,a){var i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request(Te({},r));case 2:i=t.sent,n.result=i;case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}())}function Ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var Re=function(e){(0,s.Z)(r,e);var t=Ie(r);function r(){return(0,a.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"getProviderHandlers",value:function(e){return Ne(e)}},{key:"getInjectedProviderProxy",value:function(e){return _e(e)}}]),r}(Ze);function Se(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw i}}}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function De(e){return Me.apply(this,arguments)}function Me(){return Me=(0,n.Z)(h().mark((function e(t){var r,a,i,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.privKey,a=t.getProviderEngineProxy,i=function(){return fe.RG.fromSecretKey(ve.from(r,"hex"))},"string"===typeof r){e.next=4;break}throw A.invalidParams("privKey must be a string");case 4:return o=i(),c={requestAccounts:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[o.publicKey.toBase58()]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[o.publicKey.toBase58()]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSecretKey:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le().encode(o.secretKey));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signTransaction:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message){e.next=2;break}throw re.ethErrors.rpc.invalidParams("message");case 2:return(n=t.params.message).partialSign(o),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message){e.next=2;break}throw re.ethErrors.rpc.invalidParams("message");case 2:return n=de().sign.detached(t.params.message,o.secretKey),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,i,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message){e.next=2;break}throw re.ethErrors.rpc.invalidParams("message");case 2:if(n=a()){e.next=5;break}throw re.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return(i=t.params.message).sign(o),e.next=9,n.request({method:"sendTransaction",params:[le().encode(i.serialize())]});case 9:return c=e.sent,e.abrupt("return",{signature:c});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,c,s,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=t.params)&&void 0!==r&&r.message&&null!==(n=t.params)&&void 0!==n&&n.message.length){e.next=2;break}throw re.ethErrors.rpc.invalidParams("message");case 2:i=null===(a=t.params)||void 0===a?void 0:a.message,c=Se(i||[]);try{for(c.s();!(s=c.n()).done;)u=s.value,u.partialSign(o)}catch(p){c.e(p)}finally{c.f()}return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)}))),Me.apply(this,arguments)}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var Ue=function(e){(0,s.Z)(r,e);var t=qe(r);function r(e){var n=e.config,i=e.state;return(0,a.Z)(this,r),t.call(this,{config:{chainConfig:Be(Be({},n.chainConfig),{},{chainNamespace:E})},state:i})}return(0,i.Z)(r,[{key:"enable",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.privateKey){e.next=2;break}throw re.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return e.next=4,this.setupProvider(this.state.privateKey);case 4:return e.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n,a,i,o,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De({privKey:t,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return r=e.sent,n=Ee(r),a=new d.eI,i=we(this.config.chainConfig),o=i.networkMiddleware,a.push(this.getChainSwitchMiddleware()),a.push(this.getAccountMiddleware()),a.push(n),a.push(o),c=(0,te.Xj)(a),this.updateProviderEngineProxy(c),e.next=14,this.lookupNetwork();case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw re.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(e.sent===t.privateKey){e.next=14;break}return e.next=8,this.setupProvider(t.privateKey);case 8:return e.t0=this._providerEngineProxy,e.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:e.t1=e.sent,e.t2={accounts:e.t1},e.t0.emit.call(e.t0,"accountsChanged",e.t2);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,n.Z)(h().mark((function e(t){var r,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw re.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r=this.getChainConfig(t.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:r}),e.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return n=e.sent,e.next=10,this.setupProvider(n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._providerEngineProxy){e.next=2;break}throw re.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return e.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(t=e.sent,r=this.config.chainConfig,"ok"===t){e.next=8;break}throw A.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(r.rpcTarget));case 8:return this.update({chainId:r.chainId}),this.state.chainId!==r.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),e.abrupt("return",this.state.chainId);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var e=this,t={addNewChainConfig:function(){var t=(0,n.Z)(h().mark((function t(r){var n,a,i,o,c,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.params){t.next=2;break}throw re.ethErrors.rpc.invalidParams("Missing request params");case 2:if(n=r.params,a=n.chainId,i=n.chainName,o=n.rpcUrls,c=n.blockExplorerUrls,s=n.nativeCurrency,a){t.next=5;break}throw re.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(o&&0!==o.length){t.next=7;break}throw re.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(s){t.next=9;break}throw re.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:e.addChain({chainNamespace:E,chainId:a,ticker:(null===s||void 0===s?void 0:s.symbol)||"SOL",tickerName:(null===s||void 0===s?void 0:s.name)||"Solana",displayName:i,rpcTarget:o[0],blockExplorer:(null===c||void 0===c?void 0:c[0])||""});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),switchSolanaChain:function(){var t=(0,n.Z)(h().mark((function t(r){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.params){t.next=2;break}throw re.ethErrors.rpc.invalidParams("Missing request params");case 2:if(r.params.chainId){t.next=4;break}throw re.ethErrors.rpc.invalidParams("Missing chainId");case 4:return t.next=6,e.switchChain(r.params);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e){var t=e.addNewChainConfig,r=e.switchSolanaChain;return(0,d.UZ)([xe("addSolanaChain",t),xe("switchSolanaChain",r)])}(t)}},{key:"getAccountMiddleware",value:function(){var e=this,t={updatePrivatekey:function(){var t=(0,n.Z)(h().mark((function t(r){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.params){t.next=2;break}throw re.ethErrors.rpc.invalidParams("Missing request params");case 2:if(r.params.privateKey){t.next=4;break}throw re.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return n=r.params.privateKey,t.next=7,e.updateAccount({privateKey:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return function(e){var t=e.updatePrivatekey;return(0,d.UZ)([xe("updateAccount",t)])}(t)}}]),r}(se);(0,l.Z)(Ue,"getProviderInstance",function(){var e=(0,n.Z)(h().mark((function e(t){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Ue({config:{chainConfig:t.chainConfig}}),e.next=3,r.setupProvider(t.privKey);case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());function Le(e,t,r){return new Promise((function(a,i){r>0?setTimeout((0,n.Z)(h().mark((function n(){var o;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:(o=n.sent)&&a(o),o||Le(e,t,r-1).then((function(e){return a(e),e})).catch((function(e){return i(e)}));case 5:case"end":return n.stop()}}),n)}))),t):a(!1)}))}var We=function(){var e=(0,n.Z)(h().mark((function e(){var t,r,n=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>0&&void 0!==n[0]?n[0]:{interval:1e3,count:3},!("undefined"!==typeof window&&!(null===(t=window.solana)||void 0===t||!t.isPhantom))){e.next=4;break}return e.abrupt("return",window.solana);case 4:return e.next=6,Le((function(){var e;return null===(e=window.solana)||void 0===e?void 0:e.isPhantom}),r.interval,r.count);case 6:if(!e.sent){e.next=9;break}return e.abrupt("return",window.solana);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ye(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,u.Z)(this,r)}}var ze=function(e){(0,s.Z)(r,e);var t=Ye(r);function r(e){var n;return(0,a.Z)(this,r),n=t.call(this,e),(0,l.Z)((0,o.Z)(n),"name",D.PHANTOM),(0,l.Z)((0,o.Z)(n),"adapterNamespace",O),(0,l.Z)((0,o.Z)(n),"currentChainNamespace",E),(0,l.Z)((0,o.Z)(n),"type",q),(0,l.Z)((0,o.Z)(n),"status",U.NOT_READY),(0,l.Z)((0,o.Z)(n),"_wallet",null),(0,l.Z)((0,o.Z)(n),"phantomProvider",null),(0,l.Z)((0,o.Z)(n),"rehydrated",!1),(0,l.Z)((0,o.Z)(n),"_onDisconnect",(function(){n._wallet&&(n._wallet.off("disconnect",n._onDisconnect),n.rehydrated=!1,n.status=n.status===U.CONNECTED?U.READY:U.NOT_READY,n.emit(L.DISCONNECTED))})),n.chainConfig=(null===e||void 0===e?void 0:e.chainConfig)||null,n.sessionTime=(null===e||void 0===e?void 0:e.sessionTime)||86400,n}return(0,i.Z)(r,[{key:"isWalletConnected",get:function(){var e;return!(null===(e=this._wallet)||void 0===e||!e.isConnected||this.status!==U.CONNECTED)}},{key:"provider",get:function(){var e;return(null===(e=this.phantomProvider)||void 0===e?void 0:e.provider)||null},set:function(e){throw new Error("Not implemented")}},{key:"setAdapterSettings",value:function(e){this.status!==U.READY&&(null!==e&&void 0!==e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!==e&&void 0!==e&&e.clientId&&(this.clientId=e.clientId))}},{key:"init",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,c.Z)((0,p.Z)(r.prototype),"checkInitializationRequirements",this).call(this),this.chainConfig||(this.chainConfig=C(E,"0x1")),e.next=4,We({interval:500,count:3});case 4:if(this._wallet=e.sent,this._wallet){e.next=7;break}throw A.notInstalled();case 7:if(this.phantomProvider=new Re({config:{chainConfig:this.chainConfig}}),this.status=U.READY,this.emit(L.READY,D.PHANTOM),e.prev=10,z.debug("initializing phantom adapter"),!t.autoConnect){e.next=16;break}return this.rehydrated=!0,e.next=16,this.connect();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(10),z.error("Failed to connect with cached phantom provider",e.t0),this.emit("ERRORED",e.t0);case 22:case"end":return e.stop()}}),e,this,[[10,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(0,c.Z)((0,p.Z)(r.prototype),"checkConnectionRequirements",this).call(this),this.status=U.CONNECTING,this.emit(L.CONNECTING,{adapter:D.PHANTOM}),this._wallet){e.next=6;break}throw A.notInstalled();case 6:if(this._wallet.isConnected){e.next=23;break}return t=this._wallet._handleDisconnect,e.prev=8,e.next=11,new Promise((function(e,r){var i=function(){var t=(0,n.Z)(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.connectWithProvider(a._wallet);case 2:e(a.provider);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(!a._wallet)return r(A.notInstalled());a._wallet.once("connect",i),a._wallet._handleDisconnect=function(){r(A.windowClosed());for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(a._wallet,n)},a._wallet.connect().catch((function(e){r(e)}))}));case 11:e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(8),!(e.t0 instanceof N)){e.next=17;break}throw e.t0;case 17:throw T.connectionError(null===e.t0||void 0===e.t0?void 0:e.t0.message);case 18:return e.prev=18,this._wallet._handleDisconnect=t,e.finish(18);case 21:e.next=25;break;case 23:return e.next=25,this.connectWithProvider(this._wallet);case 25:if(this._wallet.publicKey){e.next=27;break}throw T.connectionError();case 27:return this._wallet.on("disconnect",this._onDisconnect),e.abrupt("return",this.provider);case 31:throw e.prev=31,e.t1=e.catch(0),this.status=U.READY,this.rehydrated=!1,this.emit(L.ERRORED,e.t1),e.t1;case 37:case"end":return e.stop()}}),e,this,[[0,31],[8,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,n.Z)(h().mark((function e(){var t,n,a=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{cleanup:!1},e.next=3,(0,c.Z)((0,p.Z)(r.prototype),"disconnect",this).call(this);case 3:return e.prev=3,e.next=6,null===(n=this._wallet)||void 0===n?void 0:n.disconnect();case 6:t.cleanup&&(this.status=U.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit(L.DISCONNECTED),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.emit(L.ERRORED,T.disconnectionError(null===e.t0||void 0===e.t0?void 0:e.t0.message));case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=(0,n.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isWalletConnected){e.next=2;break}throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 2:return e.abrupt("return",{});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectWithProvider",value:function(){var e=(0,n.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.phantomProvider){e.next=2;break}throw T.connectionError("No phantom provider");case 2:return e.next=4,this.phantomProvider.setupProvider(t);case 4:return this.status=U.CONNECTED,this.emit(L.CONNECTED,{adapter:D.PHANTOM,reconnected:this.rehydrated}),e.abrupt("return",this.provider);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(ee)},9193:function(e,t,r){const n=r(74341);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},74341:function(e){"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var a=e.charAt(n),i=a.charCodeAt(0);if(255!==t[i])throw new TypeError(a+" is ambiguous");t[i]=n}var o=e.length,c=e.charAt(0),s=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function p(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,a=0;e[r]===c;)n++,r++;for(var i=(e.length-r)*s+1>>>0,u=new Uint8Array(i);e[r];){var p=t[e.charCodeAt(r)];if(255===p)return;for(var l=0,f=i-1;(0!==p||l<a)&&-1!==f;f--,l++)p+=o*u[f]>>>0,u[f]=p%256>>>0,p=p/256>>>0;if(0!==p)throw new Error("Non-zero carry");a=l,r++}for(var h=i-a;h!==i&&0===u[h];)h++;for(var d=new Uint8Array(n+(i-h)),v=n;h!==i;)d[v++]=u[h++];return d}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,a=0,i=t.length;a!==i&&0===t[a];)a++,r++;for(var s=(i-a)*u+1>>>0,p=new Uint8Array(s);a!==i;){for(var l=t[a],f=0,h=s-1;(0!==l||f<n)&&-1!==h;h--,f++)l+=256*p[h]>>>0,p[h]=l%o>>>0,l=l/o>>>0;if(0!==l)throw new Error("Non-zero carry");n=f,a++}for(var d=s-n;d!==s&&0===p[d];)d++;for(var v=c.repeat(r);d<s;++d)v+=e.charAt(p[d]);return v},decodeUnsafe:p,decode:function(e){var t=p(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}}}]);